{
    "componentChunkName": "component---src-pages-tuneappserver-thread-pools-mdx",
    "path": "/tuneappserver/thread-pools/",
    "result": {"pageContext":{"frontmatter":{"title":"Tuning thread pools","description":"Tuning thread pools","tabs":["AppServer","JVM Settings","Thread Pools","JDBC Settings","JMS Settings","WAS Java 2 Security"]},"relativePagePath":"/tuneappserver/thread-pools.mdx","titleType":"page","MdxNode":{"id":"a105ec1b-1ca5-5338-97dd-627f3d35a59c","children":[],"parent":"31e0491f-7249-5481-baf6-86478a4175dd","internal":{"content":"---\ntitle: Tuning thread pools\ndescription: Tuning thread pools\ntabs: ['AppServer','JVM Settings', 'Thread Pools', 'JDBC Settings', 'JMS Settings', 'WAS Java 2 Security']\n---\n\nFor online HTTP requests and asynchronous JMS processing, IBM® Cúram Social Program Management (SPM)\nis configured to use two distinct thread pools. Tune both pools as explained in the following sections.\n\nTo enable the system to be driven at optimum throughput, it is generally recommended that the total number\nof application threads are about twice the number of CPUs. This general convention assumes that the environment has fast I/O subsystems.\n\n<InlineNotification>\n\n**Note:** Threads that are used by SPM carry caches and therefore impact memory requirements. In addition,\nthe higher the number of threads, the more likely that contention occurs on Java™ locks. Therefore,\nit is recommended to limit the number of threads to a low multiplier of the number of cores.\n\n</InlineNotification>\n\n## WebSphere: WebContainer and SIBJMSRAThreadPool\n\nIn WebSphere® Application Server (WAS), the `WebContainer` thread pool is set up to process HTTP requests and the `SIBJMSRAThreadPool` is set up to process JMS messages.\n\nUse the following specification as a starting point: the total number of threads that SPM uses in the application\nserver can be set to twice the number of available cores. This starting point assumes that only one application server\nis running on the operating system or logical partition. Setting the number of threads to twice the number of cores is\nbased on experience that processing in SPM is usually split relatively equally between I/O and CPU.\n\nThe way processing is then broken down between online and asynchronous processing depends on the characteristics of your\nsystem: how much asynchronous processing does it do? As a quick-start, a simple, equal split is suggested:\n\n```\nWebContainer_max_threads = number of cores\nSIBJMSRAThreadPool_max_threads = number of cores\n```\n\nIt is suggested that you set the minimum number of threads equal to the maximum number of threads. Setting the minimum\nthreads equal to the maximum threads avoids the processing cost of pool growth and shrinkage. Use the following settings to configure the pools:\n\n```\nWebContainer_min_threads=WebContainer_max_threads\nSIBJMSRAThreadPool_min_threads=SIBJMSRAThreadPool_max_threads\n```\n\nThen, monitor the thread pool usage and the number of threads that are adjusted according to CPU utilization.\nFor example, if a thread pool is fully used and spare CPU capacity exists, you can add a thread. Spare CPU capacity,\ndepending on the platform, might be CPU use below 80%. You need to define your CPU plateau threshold based on your\nenvironment configuration and the results of load testing.\n\n## WebLogic: Maximum thread constraints\n\nIn WebLogic Server (WLS) configure the two work managers that SPM uses, which are the default work manager for HTTP\nrequests and the MDBWorkManager for JMS. Specify a maximum thread constraint. As a starting point, set the maximum thread constraints to the following values:\n\n```\ndefault_max_thread_constraint = number of cores\nMDBWorkManager_max_thread_constraint = number of cores\n```\n\nThen, tune the work managers by monitoring thread usage. Monitoring indicates thread usage for a work manager.\nIf all threads are used and CPU capacity exists, you can increase the maximum thread constraint.\n","type":"Mdx","contentDigest":"c0db39dbf28a91f27915be5481ccf6eb","owner":"gatsby-plugin-mdx","counter":116},"frontmatter":{"title":"Tuning thread pools","description":"Tuning thread pools","tabs":["AppServer","JVM Settings","Thread Pools","JDBC Settings","JMS Settings","WAS Java 2 Security"]},"exports":{},"rawBody":"---\ntitle: Tuning thread pools\ndescription: Tuning thread pools\ntabs: ['AppServer','JVM Settings', 'Thread Pools', 'JDBC Settings', 'JMS Settings', 'WAS Java 2 Security']\n---\n\nFor online HTTP requests and asynchronous JMS processing, IBM® Cúram Social Program Management (SPM)\nis configured to use two distinct thread pools. Tune both pools as explained in the following sections.\n\nTo enable the system to be driven at optimum throughput, it is generally recommended that the total number\nof application threads are about twice the number of CPUs. This general convention assumes that the environment has fast I/O subsystems.\n\n<InlineNotification>\n\n**Note:** Threads that are used by SPM carry caches and therefore impact memory requirements. In addition,\nthe higher the number of threads, the more likely that contention occurs on Java™ locks. Therefore,\nit is recommended to limit the number of threads to a low multiplier of the number of cores.\n\n</InlineNotification>\n\n## WebSphere: WebContainer and SIBJMSRAThreadPool\n\nIn WebSphere® Application Server (WAS), the `WebContainer` thread pool is set up to process HTTP requests and the `SIBJMSRAThreadPool` is set up to process JMS messages.\n\nUse the following specification as a starting point: the total number of threads that SPM uses in the application\nserver can be set to twice the number of available cores. This starting point assumes that only one application server\nis running on the operating system or logical partition. Setting the number of threads to twice the number of cores is\nbased on experience that processing in SPM is usually split relatively equally between I/O and CPU.\n\nThe way processing is then broken down between online and asynchronous processing depends on the characteristics of your\nsystem: how much asynchronous processing does it do? As a quick-start, a simple, equal split is suggested:\n\n```\nWebContainer_max_threads = number of cores\nSIBJMSRAThreadPool_max_threads = number of cores\n```\n\nIt is suggested that you set the minimum number of threads equal to the maximum number of threads. Setting the minimum\nthreads equal to the maximum threads avoids the processing cost of pool growth and shrinkage. Use the following settings to configure the pools:\n\n```\nWebContainer_min_threads=WebContainer_max_threads\nSIBJMSRAThreadPool_min_threads=SIBJMSRAThreadPool_max_threads\n```\n\nThen, monitor the thread pool usage and the number of threads that are adjusted according to CPU utilization.\nFor example, if a thread pool is fully used and spare CPU capacity exists, you can add a thread. Spare CPU capacity,\ndepending on the platform, might be CPU use below 80%. You need to define your CPU plateau threshold based on your\nenvironment configuration and the results of load testing.\n\n## WebLogic: Maximum thread constraints\n\nIn WebLogic Server (WLS) configure the two work managers that SPM uses, which are the default work manager for HTTP\nrequests and the MDBWorkManager for JMS. Specify a maximum thread constraint. As a starting point, set the maximum thread constraints to the following values:\n\n```\ndefault_max_thread_constraint = number of cores\nMDBWorkManager_max_thread_constraint = number of cores\n```\n\nThen, tune the work managers by monitoring thread usage. Monitoring indicates thread usage for a work manager.\nIf all threads are used and CPU capacity exists, you can increase the maximum thread constraint.\n","fileAbsolutePath":"/home/travis/build/IBM/spm-performance-tuning/src/pages/tuneappserver/thread-pools.mdx"}}},
    "staticQueryHashes": ["1364590287","137577622","2102389209","2456312558","2610115429","2746626797","3037994772","768070550"]}