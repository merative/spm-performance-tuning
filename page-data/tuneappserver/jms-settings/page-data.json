{
    "componentChunkName": "component---src-pages-tuneappserver-jms-settings-mdx",
    "path": "/tuneappserver/jms-settings/",
    "result": {"pageContext":{"frontmatter":{"title":"Tuning JMS settings","description":"Tuning JMS settings","tabs":["AppServer","JVM Settings","Thread Pools","JDBC Settings","JMS Settings","WAS Java 2 Security"]},"relativePagePath":"/tuneappserver/jms-settings.mdx","titleType":"page","MdxNode":{"id":"fb33f2fc-fe34-5b8d-9cba-3f400175b60e","children":[],"parent":"beb9d7ac-b89e-54fb-b794-404123e207e4","internal":{"content":"---\ntitle: Tuning JMS settings\ndescription: Tuning JMS settings\ntabs: ['AppServer','JVM Settings', 'Thread Pools', 'JDBC Settings', 'JMS Settings', 'WAS Java 2 Security']\n---\n\nThe application server settings for Java Message Service (JMS), which include connection factory and activation specification settings,\ncan affect performance. You must tune both the connection factory settings and the activation specification settings.\n\nThe client of a connection factory is the application. The application uses the connection factory to push or pull messages\nto or from the messaging engine through a queue. The client of an activation specification is the Enterprise JavaBeans (EJB) container.\nThe EJB container obtains an activation specification to register a `MessageEndpointFactory` for the message driven bean (MDB) with a ResourceAdapter.\n\nWhen a client pushes a message to the messaging engine, the messaging engine uses the registered `MessageEndpointFactory`\nto forward the message to the application, for example, the MDB. Then, the application asynchronously receives messages,\nrather than requiring the client to poll or block by trying to pull a message from the queue.\n\n## Connection factory: jms/CuramConnectionQueueFactory\n\nSimilar to the `jdbc/curamsibdb` data source, size the connection pool for the `jms/CuramConnectionQueueFactory`\nconnection factory by using the following formula:\n\n<br/>\n<strong>WebSphere</strong>\n\n```\nmax_connections = WebContainer_max_threads + SIBJMSRAThreadPool_max_threads + 1\n```\n\n<br/>\n<strong>WebLogic</strong>\n\n```\nmax_connections = default_max_thread_constraint + MDBWorkManager_Max_thread_constraint +1\n```\n\nTo prevent the processing cost of pool growth and shrinkage, it is suggested to set `min_connections = max_connections`.\n\n## WebSphere - activation specifications\n\nTune the maximum concurrent end points for the JMS activation specifications for the SPM queues. The settings define\nhow many EJB MDBs are available to process JMS messages. Asynchronous processing concurrency in the application server\nis limited by the lower of the number of either `MDBs` or `SIBJMSRAThreadPool` threads.\n\nSet the maximum concurrent end points for the SPM error queues to 1. This setting is suggested because errors are not expected at high volume.\n\nThis sizing applies to the following activation specifications:\n\n* `DPError`\n* `WorkflowError`\n* `CuramDeadMessageQueue`\n\nThen, for simplicity, use the following formulas to set the maximum concurrent end points for the three main SPM queues:\n\n```\nmax_end_points_DPEnactment = SIBJMSRAThreadPool_max_threads\nmax_end_points_WorkflowEnactment = SIBJMSRAThreadPool_max_threads\nmax_end_points_WorkflowActivity = SIBJMSRAThreadPool_max_threads\n```\n\nThe previous formulas effectively simplify tuning for asynchronous processing by creating a single point for tuning,\nwhich is the number of JMS threads. However, if more granular tuning is required, you can decrease the concurrent end points,\nfor either SPM Deferred Processing or Workflow.\n\n## WebLogic - message driven beans\n\nIn WebLogic, the number of EJB MDBs is set in the `-ejb-jar.xml` deployment descriptor. The descriptor also associates\nMDBs with the MDBWorkManager, as shown in the following example:\n\n```\n<weblogic-enterprise-bean>\n    ...\n    <message-driven-descriptor>\n    <pool>\n        <max-beans-in-free-pool>3</max-beans-in-free-pool>\n        <initial-beans-in-free-pool>3</initial-beans-in-free-pool>\n    </pool>\n    </message-driven-descriptor>\n    ...\n    <dispatch-policy>MDBWorkManager</dispatch-policy>\n</weblogic-enterprise-bean>\n\n```\n\nSet both the maximum and initial values of the beans in the free pool for the SPM error MDBs to 1. This setting is suggested\nbecause errors are not expected at high volume, and it applies to the `DPErrorMDB` and `WorkflowErrorMDB` beans.\n\nThen, for simplicity, use the following formulas to set both the maximum and initial values of the beans in the free pool for the three main SPM MDBs:\n\n```\nbeans_in_free_pool_DPEnactmentMDB=MDBWorkManager_max_thread_constraint\nbeans_in_free_pool_WorkflowEnactmentMDB=MDBWorkManager_max_thread_constraint\nbeans_in_free_pool_WorkflowActivityMDB=MDBWorkManager_max_thread_constraint\n\n```\n\nThe previous formulas effectively simplify tuning for asynchronous processing by creating a single point for tuning,\nwhich is the number of JMS threads. However, if more granular tuning is required, you can decrease the beans in the free pool,\nfor either SPM Deferred Processing or Workflow.\n","type":"Mdx","contentDigest":"abbdb60d58bd3ce1aa84b80b079ea21f","owner":"gatsby-plugin-mdx","counter":113},"frontmatter":{"title":"Tuning JMS settings","description":"Tuning JMS settings","tabs":["AppServer","JVM Settings","Thread Pools","JDBC Settings","JMS Settings","WAS Java 2 Security"]},"exports":{},"rawBody":"---\ntitle: Tuning JMS settings\ndescription: Tuning JMS settings\ntabs: ['AppServer','JVM Settings', 'Thread Pools', 'JDBC Settings', 'JMS Settings', 'WAS Java 2 Security']\n---\n\nThe application server settings for Java Message Service (JMS), which include connection factory and activation specification settings,\ncan affect performance. You must tune both the connection factory settings and the activation specification settings.\n\nThe client of a connection factory is the application. The application uses the connection factory to push or pull messages\nto or from the messaging engine through a queue. The client of an activation specification is the Enterprise JavaBeans (EJB) container.\nThe EJB container obtains an activation specification to register a `MessageEndpointFactory` for the message driven bean (MDB) with a ResourceAdapter.\n\nWhen a client pushes a message to the messaging engine, the messaging engine uses the registered `MessageEndpointFactory`\nto forward the message to the application, for example, the MDB. Then, the application asynchronously receives messages,\nrather than requiring the client to poll or block by trying to pull a message from the queue.\n\n## Connection factory: jms/CuramConnectionQueueFactory\n\nSimilar to the `jdbc/curamsibdb` data source, size the connection pool for the `jms/CuramConnectionQueueFactory`\nconnection factory by using the following formula:\n\n<br/>\n<strong>WebSphere</strong>\n\n```\nmax_connections = WebContainer_max_threads + SIBJMSRAThreadPool_max_threads + 1\n```\n\n<br/>\n<strong>WebLogic</strong>\n\n```\nmax_connections = default_max_thread_constraint + MDBWorkManager_Max_thread_constraint +1\n```\n\nTo prevent the processing cost of pool growth and shrinkage, it is suggested to set `min_connections = max_connections`.\n\n## WebSphere - activation specifications\n\nTune the maximum concurrent end points for the JMS activation specifications for the SPM queues. The settings define\nhow many EJB MDBs are available to process JMS messages. Asynchronous processing concurrency in the application server\nis limited by the lower of the number of either `MDBs` or `SIBJMSRAThreadPool` threads.\n\nSet the maximum concurrent end points for the SPM error queues to 1. This setting is suggested because errors are not expected at high volume.\n\nThis sizing applies to the following activation specifications:\n\n* `DPError`\n* `WorkflowError`\n* `CuramDeadMessageQueue`\n\nThen, for simplicity, use the following formulas to set the maximum concurrent end points for the three main SPM queues:\n\n```\nmax_end_points_DPEnactment = SIBJMSRAThreadPool_max_threads\nmax_end_points_WorkflowEnactment = SIBJMSRAThreadPool_max_threads\nmax_end_points_WorkflowActivity = SIBJMSRAThreadPool_max_threads\n```\n\nThe previous formulas effectively simplify tuning for asynchronous processing by creating a single point for tuning,\nwhich is the number of JMS threads. However, if more granular tuning is required, you can decrease the concurrent end points,\nfor either SPM Deferred Processing or Workflow.\n\n## WebLogic - message driven beans\n\nIn WebLogic, the number of EJB MDBs is set in the `-ejb-jar.xml` deployment descriptor. The descriptor also associates\nMDBs with the MDBWorkManager, as shown in the following example:\n\n```\n<weblogic-enterprise-bean>\n    ...\n    <message-driven-descriptor>\n    <pool>\n        <max-beans-in-free-pool>3</max-beans-in-free-pool>\n        <initial-beans-in-free-pool>3</initial-beans-in-free-pool>\n    </pool>\n    </message-driven-descriptor>\n    ...\n    <dispatch-policy>MDBWorkManager</dispatch-policy>\n</weblogic-enterprise-bean>\n\n```\n\nSet both the maximum and initial values of the beans in the free pool for the SPM error MDBs to 1. This setting is suggested\nbecause errors are not expected at high volume, and it applies to the `DPErrorMDB` and `WorkflowErrorMDB` beans.\n\nThen, for simplicity, use the following formulas to set both the maximum and initial values of the beans in the free pool for the three main SPM MDBs:\n\n```\nbeans_in_free_pool_DPEnactmentMDB=MDBWorkManager_max_thread_constraint\nbeans_in_free_pool_WorkflowEnactmentMDB=MDBWorkManager_max_thread_constraint\nbeans_in_free_pool_WorkflowActivityMDB=MDBWorkManager_max_thread_constraint\n\n```\n\nThe previous formulas effectively simplify tuning for asynchronous processing by creating a single point for tuning,\nwhich is the number of JMS threads. However, if more granular tuning is required, you can decrease the beans in the free pool,\nfor either SPM Deferred Processing or Workflow.\n","fileAbsolutePath":"/home/travis/build/IBM/spm-performance-tuning/src/pages/tuneappserver/jms-settings.mdx"}}},
    "staticQueryHashes": ["1364590287","137577622","2102389209","2456312558","2610115429","2746626797","3037994772","768070550"]}